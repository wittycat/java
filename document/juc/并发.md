#### 1.并发基础
##### 多线程
- java中有几种方法可以实现一个线程？
    
    继承Thread，实现Runable，或Callable（返回Future）
- 如何停止一个正在运行的线程？

    条件变量，比如volatile类型的变量或其他
- notify()和notifyAll()有什么区别？
  
    随机，全部
- sleep()和 wait()有什么区别?
    
    定时等待（不释放锁）和在监视器上等待（释放锁）

- 什么是Daemon线程？它有什么意义？
  
    守护线程，不需要上层逻辑介入的后台线程 ，比如GC
- java如何实现多线程之间的通讯和协作？
   
    中断和 直接或间接访问对方实例
##### 锁
- 什么是可重入锁（ReentrantLock）？

    更高级的锁，附加更多特性。ReentrantLock 相对于固有锁synchronized，同样是可重入的，在某些vm版本上提供了比固有锁更高的性能，提供了更丰富的锁特性，比如可中断的锁，可等待的锁，平等锁以及非块结构的加锁。从代码上尽量用固有锁，vm会对固有锁做一定的优化，并且代码可维护和稳定。只有在需要ReentrantLock的一些特性时，可以考虑用ReentrantLock实现。
- 当一个线程进入某个对象的一个synchronized的实例方法后，其它线程是否可进入此对象的其它方法？
    
    可进入非synchronized方法
- synchronized和java.util.concurrent.locks.Lock的异同？
   
    后者具有更丰富的特性
- 乐观锁和悲观锁的理解及如何实现，有哪些实现方式？

    乐观锁是假设我已经拿到锁，悲观所是我必须拿到锁，前者用CAS，后者用mutex（互斥）

##### 并发框架
- SynchronizedMap和ConcurrentHashMap有什么区别？
   
    后者具有更高的并发
- CopyOnWriteArrayList可以用于什么应用场景？

    多读少写

##### 线程安全
- 什么叫线程安全？servlet是线程安全吗?

    在多线程调用情况下，依然表现正常
- 同步有几种实现方法？

	锁和volatile
- volatile有什么用？能否用一句话说明下volatile的应用场景？

	保持可见性，在1写N读的情况下比较适合
- 请说明下java的内存模型及其工作流程。

	JVM的内存模型可简单理解为，有一块整个JVM共享的主内存，每个线程有自己的变量复本，线程持有的复本与主内存之间使用内部的数据协议
- 为什么代码会重排序？

	编译器旨在提升性能

#### 2.并发实战 - 并发容器和框架
- 如何让一段程序并发的执行，并最终汇总结果？

	使用CyclicBarrier 和CountDownLatch都可以。使用CyclicBarrier 在多个关口处将多个线程执行结果汇总；CountDownLatch 在各线程执行完毕后向总线程汇报结果
- 如何合理的配置java线程池？如CPU密集型的任务，基本线程池应该配置多大？IO密集型的任务，基本线程池应该配置多大？用有界队列好还是无界队列好？任务非常多的时候，使用什么阻塞队列能获取最好的吞吐量？

	 配置线程池时CPU密集型任务可以少配置线程数，大概和机器的cpu核数相当，可以使得每个线程都在执行任务IO密集型时，大部分线程都阻塞，故需要多配置线程数，2*cpu核数。有界队列和无界队列的配置需区分业务场景，一般情况下配置有界队列，在一些可能会有爆发性增长的情况下使用无界队列。任务非常多时，使用非阻塞队列使用cas操作替代锁可以获得好的吞吐量。
- 如何使用阻塞队列实现一个生产者和消费者模型？请写代码。


- 多读少写的场景应该使用哪个并发容器，为什么使用它？比如你做了一个搜索引擎，搜索引擎每次搜索前需要判断搜索关键词是否在黑名单里，黑名单每天更新一次。

	CopyOnWriteArrayList这个容器适用于多读少写…读写并不是在同一个对象上。在写时会大面积复制数组，所以写的性能差，在写完成后将读的引用改为执行写的对象

##### Java中的锁
- 如何实现乐观锁（CAS）？如何避免ABA问题？
    
     1.读取内存值->比较内存值和期望值->替换内存值为要替换值。

     2.带参数版本来避免aba问题，在读取和替换的时候进行判定版本是否一致
- 读写锁可以用于什么应用场景？

	多读少写，读写锁支持多个读操作并发执行，写操作只能由一个线程来操作
- 什么时候应该使用可重入锁？

	重入锁指的是在某一个线程中可以多次获得同一把锁，在线程中多次操作有锁的方法。
- 什么场景下可以使用volatile替换synchronized？

	只需要保证共享资源的可见性的时候可以使用volatile替代，synchronized保证可操作的原子性一致性和可见性。volatile适用于新值不依赖于旧的情形，它不保证操作有原子性。

##### 并发工具
- 如何实现一个流控程序，用于控制请求的调用次数？

    Semaphore，保证不会超过最大的许可数线程执行。
